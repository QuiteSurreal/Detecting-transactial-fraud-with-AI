<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link href="../resources/style.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="../resources/loadStatsData.js"></script>
  <link rel="icon" href="data:,">
  <title>Transaction evaluator</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light navbar-fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="index">Transaction evaluator</a>
      <ul class="nav navbar-nav">
        <li class="nav-item"><a class="nav-link" href="index">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="tasks">Previous tasks</a></li>
        <li class="nav-item active"><a class="nav-link" href="stats">Statistics</a></li>
      </ul>
    </div>
    </nav>

    <div class="container" style="margin-top: 80px; margin-bottom: 40px;">
      <h1>Overall Statistics</h1>
      
      <!-- Top Summary Section -->
      <div class="row mt-5 mb-5">
        <div class="col-md-3">
          <div class="card stats-card">
            <div class="card-body">
              <h6 class="card-title">Total Records</h6>
              <h3 id="totalRecords" class="card-text">0</h3>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card stats-card">
            <div class="card-body">
              <h6 class="card-title">Fraudulent</h6>
              <h3 id="totalFrauds" class="card-text">0</h3>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card stats-card">
            <div class="card-body">
              <h6 class="card-title">Legitimate</h6>
              <h3 id="totalLegit" class="card-text">0</h3>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card stats-card">
            <div class="card-body">
              <h6 class="card-title">Fraud Rate</h6>
              <h3 id="fraudRate" class="card-text">0%</h3>
            </div>
          </div>
        </div>
      </div>

      <!-- Metrics Section -->
      <div class="row mt-4 mb-5">
        <div class="col-md-3">
          <div class="card metrics-card">
            <div class="card-body">
              <h6 class="card-title">Accuracy</h6>
              <h2 id="accuracy" class="metric-value">0.000</h2>
              <small class="text-muted">Overall correct predictions</small>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card metrics-card">
            <div class="card-body">
              <h6 class="card-title">Precision</h6>
              <h2 id="precision" class="metric-value">0.000</h2>
              <small class="text-muted">True fraud detection rate</small>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card metrics-card">
            <div class="card-body">
              <h6 class="card-title">Recall</h6>
              <h2 id="recall" class="metric-value">0.000</h2>
              <small class="text-muted">Caught frauds ratio</small>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card metrics-card">
            <div class="card-body">
              <h6 class="card-title">F1 Score</h6>
              <h2 id="f1score" class="metric-value">0.000</h2>
              <small class="text-muted">Harmonic mean</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Confusion Matrix Section -->
      <div class="row mt-5 mb-5">
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-primary text-white">
              <h5 class="mb-0">Confusion Matrix</h5>
            </div>
            <div class="card-body">
              <img id="confusionMatrixImg" src="" alt="Confusion Matrix" style="max-width: 100%; max-height: 400px; display: none;">
              <div id="confusionMatrixPlaceholder" style="width: 100%; height: 400px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; border-radius: 4px;">
                <span class="text-muted">Confusion matrix will load here...</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-success text-white">
              <h5 class="mb-0">Data Distribution</h5>
            </div>
            <div class="card-body">
              <canvas id="dataDistributionChart" style="max-height: 400px;"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Model Selection Section -->
      <div class="row mt-5 mb-4">
        <div class="col-md-12">
          <div class="card">
            <div class="card-header bg-secondary text-white">
              <h5 class="mb-0">Select Model for Detailed Dashboard</h5>
            </div>
            <div class="card-body">
              <div class="row align-items-end">
                <div class="col-md-6">
                  <label for="modelSelector" class="form-label">Choose a Model:</label>
                  <select id="modelSelector" class="form-select">
                    <option value="">-- Select a model --</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Model-Specific Dashboard (hidden by default) -->
      <div id="modelDashboard" style="display: none;">
        <h2 id="modelDashboardTitle" style="margin-top: 40px; margin-bottom: 20px;">Model Statistics</h2>
        
        <!-- Model Summary Cards -->
        <div class="row mb-5">
          <div class="col-md-3">
            <div class="card stats-card">
              <div class="card-body">
                <h6 class="card-title">Total Records</h6>
                <h3 id="modelRecords" class="card-text">0</h3>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card stats-card">
              <div class="card-body">
                <h6 class="card-title">Fraudulent</h6>
                <h3 id="modelFrauds" class="card-text">0</h3>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card stats-card">
              <div class="card-body">
                <h6 class="card-title">Legitimate</h6>
                <h3 id="modelLegit" class="card-text">0</h3>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card stats-card">
              <div class="card-body">
                <h6 class="card-title">Fraud Rate</h6>
                <h3 id="modelFraudRate" class="card-text">0%</h3>
              </div>
            </div>
          </div>
        </div>

        <!-- Model Metrics -->
        <div class="row mb-5">
          <div class="col-md-3">
            <div class="card metrics-card">
              <div class="card-body">
                <h6 class="card-title">Accuracy</h6>
                <h2 id="modelAccuracy" class="metric-value">0.000</h2>
                <small class="text-muted">Overall correct predictions</small>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card metrics-card">
              <div class="card-body">
                <h6 class="card-title">Precision</h6>
                <h2 id="modelPrecision" class="metric-value">0.000</h2>
                <small class="text-muted">True fraud detection rate</small>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card metrics-card">
              <div class="card-body">
                <h6 class="card-title">Recall</h6>
                <h2 id="modelRecall" class="metric-value">0.000</h2>
                <small class="text-muted">Caught frauds ratio</small>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card metrics-card">
              <div class="card-body">
                <h6 class="card-title">F1 Score</h6>
                <h2 id="modelF1" class="metric-value">0.000</h2>
                <small class="text-muted">Harmonic mean</small>
              </div>
            </div>
          </div>
        </div>

        <!-- Model Confusion Matrix -->
        <div class="row mb-5">
          <div class="col-md-12">
            <div class="card">
              <div class="card-header bg-primary text-white">
                <h5 class="mb-0">Model Confusion Matrix</h5>
              </div>
              <div class="card-body">
                <img id="modelConfusionMatrixImg" src="" alt="Model Confusion Matrix" style="max-width: 100%; max-height: 600px; display: none;">
                <div id="modelConfusionMatrixPlaceholder" style="width: 100%; height: 600px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; border-radius: 4px;">
                  <span class="text-muted">Model confusion matrix will load here...</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
</body>
</html>